.PHONY: clean

all: rspamd_test_suite

rspamd_test_suite: $(OBJECTS) $(OBJ_DEPENDS)
	$(CC) $(PTHREAD_LDFLAGS) $(LDFLAGS) $(OBJECTS) $(OBJ_DEPENDS) $(LIBS) -o rspamd_test_suite

run_test: rspamd_test_suite
	gtester --verbose -k -o=rspamd_test.xml ./rspamd_test_suite
	less rspamd_test.xml && rm -f rspamd_test.xml

clean:
	rm -f *.o rspamd_test_suite *.core rspamd_test.xml

dist-clean: clean
	rm -f Makefile
